


        <div class="mt-6 px-5 py-4 bg-white dark:bg-gray-800 shadow rounded-lg w-full">
          <div class="flex mb-4">
            <% if post.user.avatar.attached? %>
              <%= image_tag post.user.avatar.variant(:thumb), class: 'w-12 h-12 rounded-full'%>
            <% else %>
              <%=image_tag("#{ENV['DEFAULT_AVATAR_IMAGE_PATH']}", :alt => "user photo", class: 'w-12 h-12 rounded-full') %>
            <% end %>
            <div class="ml-2 mt-0.5 w-full">
              <span class="inline-block text-lg font-bold text-slate-700 dark:text-gray-100 mt-3"><%=h(post.user.full_name) %></span>
              <%=link_to show_post_path(post.user.username, post.hashid), class: "float-right" do%>
                <%=render 'layouts/post_date_section', post: post%>
              <% end %>
              </div>
          </div>
          
          <p class="text-gray-800 dark:text-gray-100 leading-snug md:leading-normal">
            <hr class="mb-4">
            <div x-data="{ open: false, word: 'Edit' }">
              <% if current_user.present?  && current_user.id == post.user_id %>
                <button class="float-right" x-on:click="open = ! open, word = (word == 'Edit') ? 'Cancel' : 'Edit'" x-text="word">Edit</button>
                <% end %>
                <div x-show="open">
                    <%= form_with(url: save_edit_post_path(post.hashid), html: { method: :patch}) do |f| %>
                    <%= hidden_field 'id', post.hashid  %>
                        <div class="mb-2">
                            <textarea name="text", required = true, class="bg-gray-100 rounded border border-gray-400 leading-normal resize-none w-full py-2 px-3 font-medium placeholder-gray-700 focus:outline-none focus:bg-white"><%=post.text%></textarea>
                        </div>

                <div class="flex float-right">    
                        <button role="submit" class="p-2 rounded-md bg-blue-500 text-white hover:bg-blue-400" required>Save</button>
                    </div>
                    <br>
                    <% end %>
                </div>
                  
                <div x-show="! open">

                    <%= render 'layouts/post_text', post: post %>

                </div>
            </div>
            
            <!-- component -->
                    </p>

          <div class="flex items-center justify-between text-slate-500 mt-4">
            <div class="flex space-x-4 md:space-x-8">
              <%=link_to show_post_path(post.user.username, post.hashid) do%>
              <div class="flex cursor-pointer items-center transition hover:text-slate-600">
                <svg xmlns="http://www.w3.org/2000/svg" class="mr-1.5 h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z" />
                </svg>
                <span id = "post-count-<%=post.id%>" x-text = "count"><%=post.comments.size%></span>
              </div>
              <% end %>
              <% unless current_user.nil?%>
              <div class="flex cursor-pointer items-center transition hover:text-slate-600" x-data="{ count: <%=post.likes.size%>, liked: <%=!post.likes.select{|item| item.user_id == current_user.id}.empty?%> }">
                <a href="javascript:add_like(<%=!current_user.nil? ? current_user.id : -1 %>,null,<%=post.id%>)" @click="if (liked) {count -=1; liked = false;} else { count +=1; liked = true;}">
                <svg xmlns="http://www.w3.org/2000/svg" id="post-heart-<%=post.id%>" class="float-left <%='text-blue-600' if (!current_user.nil? && !post.likes.select{|item| item.user_id == current_user.id}.empty?)%> mr-1.5 h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5" />
                </svg>
                <span id = "post-count-<%=post.id%>" x-text = "count" class="float-left"><%="#{post.likes.size}"%></span>
                </a>
              </div>
              <% end %>
            </div>
          </div>
        </div>

 