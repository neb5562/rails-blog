<% content_for(:html_title) { "My posts" } %>
<%=render "layouts/users_sidebar" %>
<div class="mt-10 float-left w-full max-w-4xl content-center">
  <div class="flex items-baseline justify-between mx-4">
    <a href = "<%=create_new_post_path%>" class="bg-blue-500 hover:bg-blue-700 text-slate-200 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
      New post
      <svg xmlns="http://www.w3.org/2000/svg" class="float-right h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
      </svg>
    </a>
  </div>
  <br>
  <% unless @posts.empty? %>
    <table class="w-4/5 mx-4">
      <thead class="bg-white border-b">
        <tr>
          <th scope="col" class="text-sm font-medium text-gray-900 px-6 py-4 text-left">
            #
          </th>
          <th scope="col" class="text-sm font-medium text-gray-900 px-6 py-4 text-left">
            Date created/updated
          </th>
          <th scope="col" class="text-sm font-medium text-gray-900 px-6 py-4 text-left">
            Active
          </th>
          <th scope="col" class="text-sm font-medium text-gray-900 px-6 py-4 text-left">
            Actions
          </th>
        </tr>
      </thead>
      <tbody>
        <% @posts.each do |post| %>
          <tr class="bg-gray-100 border-b <%='border-b bg-yellow-100 border-yellow-200' unless post.active %>">
            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
              <%=link_to post.hashid, show_post_path(post.user.username, post.hashid), target: '_blank', class:'underline text-blue-600 hover:text-blue-800 visited:text-purple-600'%>
              <td class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap">
                <%=post.created_at.strftime("%b %d, %Y %H:%M")%>/<%=post.updated_at.strftime("%b %d, %Y %H:%M")%>
              </td>
              <td class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap">
                <%=post.active ? 'Published' : 'Draft' %>
              </td>
              <td class="text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap">
                <%=link_to (post.active ? "Draft it" : "Publish it"), "#{toggle_post_status_path(post.hashid)}", class: 'underline' %> | 
                <%=link_to "Edit", "#{edit_post_url(post.hashid)}", class: 'underline' %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
      <div class="p-4 text-sm text-gray-700 bg-gray-100 rounded-lg dark:bg-gray-700 dark:text-gray-300" role="alert">
        no posts found 
      </div>
    <% end %>
    <div class="mx-auto text-center my-4">
      <%= paginate @posts %>
    </div>
  </div>
